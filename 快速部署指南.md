# ğŸš€ Deep360 GitHub Webhook å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²ä¿¡æ¯
- **æœåŠ¡å™¨ IP**: 74.208.61.148
- **GitHub ä»“åº“**: zyikun0911/deep360
- **Webhook å¯†é’¥**: deep360-secret-1234

## ğŸ”§ æ­¥éª¤ 1: ä¸Šä¼ é…ç½®æ–‡ä»¶

åœ¨æ‚¨çš„ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# ä¸Šä¼  Webhook é…ç½®æ–‡ä»¶
scp webhook-server.js root@74.208.61.148:/opt/messenger360/
scp webhook-receiver.sh root@74.208.61.148:/opt/messenger360/
scp nginx-deep360.conf root@74.208.61.148:/etc/nginx/sites-available/deep360
```

## ğŸ”§ æ­¥éª¤ 2: é…ç½®æœåŠ¡å™¨

ç™»å½•æœåŠ¡å™¨å¹¶æ‰§è¡Œé…ç½®ï¼š

```bash
# ç™»å½•æœåŠ¡å™¨
ssh root@74.208.61.148

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/messenger360

# è®¾ç½®æƒé™
chmod +x webhook-receiver.sh

# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p /var/log
touch /var/log/deep360-webhook.log
chmod 666 /var/log/deep360-webhook.log

# é…ç½® Nginx
ln -sf /etc/nginx/sites-available/deep360 /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx

# å¯åŠ¨ Webhook æœåŠ¡å™¨
pm2 start webhook-server.js --name deep360-webhook
pm2 save

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 list
```

## ğŸ”§ æ­¥éª¤ 3: é…ç½® GitHub Webhook

1. **è®¿é—® GitHub ä»“åº“è®¾ç½®**:
   - æ‰“å¼€: https://github.com/zyikun0911/deep360/settings/hooks
   - ç‚¹å‡» "Add webhook"

2. **é…ç½® Webhook å‚æ•°**:
   - **Payload URL**: `http://74.208.61.148/webhook`
   - **Content type**: `application/json`
   - **Secret**: `deep360-secret-1234`
   - **Events**: é€‰æ‹© "Just the push event"
   - ç‚¹å‡» "Add webhook"

## ğŸ”§ æ­¥éª¤ 4: æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²

```bash
# æ¨é€æµ‹è¯•ä»£ç 
git add .
git commit -m "æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²"
git push origin main

# æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
ssh root@74.208.61.148 "tail -f /var/log/deep360-webhook.log"
```

## ğŸ“Š ç›‘æ§å‘½ä»¤

```bash
# æŸ¥çœ‹ Webhook æ—¥å¿—
ssh root@74.208.61.148 "tail -f /var/log/deep360-webhook.log"

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ssh root@74.208.61.148 "pm2 status"

# å¥åº·æ£€æŸ¥
ssh root@74.208.61.148 "curl -f http://localhost:7788/health"
```

## ğŸ¯ ä¸€é”®éƒ¨ç½²è„šæœ¬

å¦‚æœæ‚¨æƒ³ä¸€æ¬¡æ€§æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼Œå¯ä»¥å¤åˆ¶ä»¥ä¸‹è„šæœ¬ï¼š

```bash
#!/bin/bash
# Deep360 ä¸€é”®éƒ¨ç½²è„šæœ¬

SERVER_IP="74.208.61.148"

echo "ğŸš€ å¼€å§‹éƒ¨ç½² Deep360 GitHub Webhook..."

# 1. ä¸Šä¼ é…ç½®æ–‡ä»¶
echo "ğŸ“¤ ä¸Šä¼ é…ç½®æ–‡ä»¶..."
scp webhook-server.js root@$SERVER_IP:/opt/messenger360/
scp webhook-receiver.sh root@$SERVER_IP:/opt/messenger360/
scp nginx-deep360.conf root@$SERVER_IP:/etc/nginx/sites-available/deep360

# 2. é…ç½®æœåŠ¡å™¨
echo "ğŸ”§ é…ç½®æœåŠ¡å™¨..."
ssh root@$SERVER_IP << 'EOF'
cd /opt/messenger360
chmod +x webhook-receiver.sh
mkdir -p /var/log
touch /var/log/deep360-webhook.log
chmod 666 /var/log/deep360-webhook.log
ln -sf /etc/nginx/sites-available/deep360 /etc/nginx/sites-enabled/
nginx -t && systemctl reload nginx
pm2 start webhook-server.js --name deep360-webhook
pm2 save
echo "âœ… æœåŠ¡å™¨é…ç½®å®Œæˆ"
EOF

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo ""
echo "ğŸ“‹ ä¸‹ä¸€æ­¥ï¼š"
echo "1. è®¿é—® https://github.com/zyikun0911/deep360/settings/hooks"
echo "2. é…ç½® Webhook: http://74.208.61.148/webhook"
echo "3. æµ‹è¯•æ¨é€: git push origin main"
```

## ğŸ‰ å®Œæˆï¼

éƒ¨ç½²å®Œæˆåï¼Œå½“æ‚¨æ¨é€ä»£ç åˆ° GitHub æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨ï¼š
1. æ¥æ”¶ Webhook é€šçŸ¥
2. éªŒè¯è¯·æ±‚å®‰å…¨æ€§
3. æ‹‰å–æœ€æ–°ä»£ç 
4. é‡æ–°æ„å»ºåº”ç”¨
5. é‡å¯æœåŠ¡
6. éªŒè¯éƒ¨ç½²æˆåŠŸ

**ç°åœ¨æ‚¨å¯ä»¥äº«å—å®Œå…¨è‡ªåŠ¨åŒ–çš„å¼€å‘éƒ¨ç½²æµç¨‹ï¼** ğŸš€
